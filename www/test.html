<html>
 <head>

  <title>Resource Map</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" type="text/css" href="css/index.css" />
  <link href="css/vendor/form_validation.css" rel="stylesheet" type="text/css"/>
  <link href="css/alertStyle.css" rel="stylesheet" type="text/css"/>
  <link href="css/vendor/font_style.css" rel="stylesheet" type="text/css"/>

  <link href="css/libs/jquery.mobile-1.4.2.css" rel="stylesheet" type="text/css"/>
  <link href="css/libs/jqm1.4.2.css" rel="stylesheet" type="text/css"/>
  <link href="css/libs/jquery.mobile.icons.min.css" rel="stylesheet" type="text/css"/>

  <!--core library-->
  <script src="js/libs/jquery-1.11.0.min.js"></script>

  <!--Project files-->
  <script src="js/libs/jquery.mobile-1.4.2.js" type="text/javascript"></script>

  <script type="text/javascript">
   $(function () {
     $("#user_autocomplete").on("listviewbeforefilter", function (e, data) {
      console.log("data: ", data);
       var $ul = $(this),
           $input = $(data.input),
           value = $input.val(),
           html = "";
       $ul.html("");
       if (value && value.length > 2) {
         $ul.html("<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>");
         $ul.listview("refresh");
         $.ajax({
           url: "http://gd.geobytes.com/AutoCompleteCity",
           dataType: "jsonp",
           crossDomain: true,
           data: {
             q: $input.val()
           }
         })
             .then(function (response) {
               $.each(response, function (i, val) {
                 html += "<li>" + val + "</li>";
               });
               $ul.html(html);
               $ul.listview("refresh");
               $ul.trigger("updatelayout");
             });
       }
     });
   });
  </script>
 </head>
 <body>

  <div data-role="page" id="test" data-theme="c">
   <div data-role="header" data-theme="a" id="header">
    <h1>Titel</h1>

   </div>
   <div data-role="content">
    <ul id="user_autocomplete" 
        data-role="listview" 
        data-inset="true" 
        data-filter="true" 
        data-filter-placeholder="Stadtname" 
     data-filter-theme="a">
      
    </ul>
   </div>
 </body>
</html>
